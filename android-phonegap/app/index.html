<!DOCTYPE html> 
<html> 
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RedmineApp</title> 
	<link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.0b3.min.css" />
	<script type="text/javascript" charset="utf-8" src="/usr/palm/frameworks/mojo/mojo.js" x-mojo-version="1"></script>
	<script type="text/javascript" charset="utf-8" src="jquery.mobile/jquery-1.6.4.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="jquery.mobile/jquery.mobile-1.0b3.min.js"></script>
	<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
	<script type="text/javascript" charset="utf-8" src="js/textile.js"></script>
	<script type="text/javascript" charset="utf-8" src="js/storage.js"></script>
	<script type="text/javascript" charset="utf-8" src="js/std.js"></script>
</head> 
<body>

<div data-role="page" id="index">
	<div data-role="header">
		<h1>RedmineApp</h1>
		<a href="#config" data-icon="gear" class="ui-btn-right">Options</a>

	</div><!-- /header -->

	<div data-role="content">	
		<h2>My Tickets</h2>
		
		<ul data-role="listview" data-inset="true" id="issuelist">
		</ul>
	</div><!-- /content -->
</div>

<!-- Start of second page: #two -->
<div data-role="page" id="config" data-add-back-btn="true">

	<div data-role="header">
		<h1>RedmineApp</h1>
	</div><!-- /header -->

	<div data-role="content">	
		<h2>Config</h2>
		
		<div data-role="fieldcontain">
		    <label for="name">API-Key:</label>
		    <input type="text" name="key" id="key" value=""  />
		</div>
	</div><!-- /content -->
</div>

<div data-role="page" id="ticket" data-add-back-btn="true">
	<div data-role="header">
		<h1>RedmineApp</h1>
	</div><!-- /header -->

	<div data-role="content">	
		<h2>#<span class="ticketnr"></span> <span class="subject">Subject</h2>

		<p class="desc"></p>
		
		<p>
			Prio: <span class="priority-name"></span>
		</p>
		<p>
			Status: <span class="status-name"></span>
		</p>
		<p>
			Autor: <span class="author-name"></span>
		</p>
		<p>
			Zugewiesen an: <span class="assigned_to"></span>
		</p>

		<dl class="journal"></dl>

		<form action="" method="put" data-ajax="false">
			<div data-role="fieldcontain">
			    <label for="comment">Kommentar</label>
			    <textarea name="comment" id="comment"></textarea>
			</div>	
			<div data-role="fieldcontain">
			    <label for="users">Zugewiesen an</label>
			    <select id="assigned_to" name="users" class="users">
				    <option value="157">Christian HÃ¼hnerfauth</option>
				    <option value="35">Johann</option>
			    </select>
			</div>	
			<input type="submit" value="Absenden">
		</form>
	<script>

	$("input[type=submit]").click(function(){
		$.ajax({
			type : "PUT",
			url: "https://projects.satzmedia.de/issues/10726.json?key=5c8d91b66ce9184922c72a916140610833e8a2b1",
			data : {
			    "issue": {
			      "notes": $("#comment").val(),
			      "assigned_to": $("#assigned_to").val()
			    }
			}
		});
	});

	</script>
	</div><!-- /content -->
</div>

</body>
</html>
