<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=Unicode" />
		<meta http-equiv="X-UA-Compatible" content="IE8" />
		<title>Mensa Gadget Settings</title>
		<script type="text/javascript">
			window.onload = function(){
				var inputs = [],
					i = 0,
					template = Hogan.compile(document.getElementById("mensaCheckbox").innerHTML);
//					window.prompt("alive and", "breathing" + JSON.stringify(conf.getMensaInfo()));
				document.getElementById("mensen").innerHTML = template.render({"mensen" : conf.getMensaInfo()});
				inputs = document.getElementsByTagName("input");
//window.prompt("alive and", "breathing");
				for(i = 0; i < inputs.length; i++){
					inputs[i].onclick = saveMensen;
				}
//				window.prompt("alive and", "breathing");
			};
			
			saveMensen = function(){
					var inputs = document.getElementsByTagName("input"),
					settings = [],
					i = 0;

				for(i = 0; i < inputs.length; i++){
					if(inputs[i].checked) settings.push(inputs[i].value);
				}
//				window.prompt(JSON.stringify(settings));
//				window.prompt("settings", settings.length);
				conf.setURLs(settings);
//				window.prompt("saved: ", JSON.stringify(conf.getSavedURLs()));
//				window.prompt("settings", settings.length);
				
			};
			
		</script>
	
		<script src="js/filter-polyfill.js" type="text/javascript"></script>
		<script src="js/json2.js"       type="text/javascript"></script>
		<script src="js/data.js"       type="text/javascript"></script>
		<script src="js/conf.js"      type="text/javascript"></script>
		<script src="js/hogan.min.js" type="text/javascript"></script>
		<script src="js/storage.js"   type="text/javascript"></script>
		<script src="js/urls.js"      type="text/javascript"></script>
		<script src="js/utils.js"     type="text/javascript"></script>
		<script src="js/xhr.js"       type="text/javascript"></script>
		<script type="text/html" id="mensaCheckbox">
			{{#mensen}}
				<li>
					<input type="checkbox" {{#active}}checked="checked"{{/active}} name="mensen" value="{{name}}" id="{{name}}" class="custom">
					<label for="{{name}}">{{name}}</label>
				</li>
			{{/mensen}}
		</script>
	</head>
	<body style="width: 250px; height: 600px;">

	<form>
		<fieldset>
			<legend>Mensen</legend>
			<div id="mensen" style="height: 340px;overflow-y: scroll"></div>
		</fieldset>
	</form>
</html>
